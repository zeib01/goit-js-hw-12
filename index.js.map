{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '33475610-696620aeee3e1938961deeefe';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n  return { totalHits: response.data.totalHits, images: response.data.hits };\n}\n","import SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt', // Використовуємо текст з атрибута alt як підпис\n  captionDelay: 250, // Затримка перед показом підпису\n  showCounter: true, // Відображення лічильника зображень\n});\n\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\n\nexport function showLoader() {\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      image => `\n        <li class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\" target=\"_blank\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"300\"/>\n          </a>\n          <div class=\"info\">\n            <p><b>Likes:</b> ${image.likes}</p>\n            <p><b>Views:</b> ${image.views}</p>\n            <p><b>Comments:</b> ${image.comments}</p>\n            <p><b>Downloads:</b> ${image.downloads}</p>\n          </div>\n        </li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function smoothScroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (galleryItem) {\n    const itemHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({ top: itemHeight * 2, behavior: 'smooth' });\n  }\n}\n","import { fetchImages } from './js/pixabay-api';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\n  showLoader,\n  hideLoader,\n  clearGallery,\n  renderImages,\n  smoothScroll,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector(\"input[name='search-text']\");\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet currentTotalHits = 0;\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n\nhideLoadMoreBtn();\nhideLoader();\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  currentQuery = input.value.trim();\n  currentPage = 1;\n\n  if (!currentQuery) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term.',\n      position: 'topRight',\n      timeout: 5000,\n    });\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreBtn();\n  showLoader();\n\n  let result;\n  try {\n    result = await fetchImages(currentQuery, currentPage);\n  } catch (error) {\n    // console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n      timeout: 5000,\n    });\n    return;\n  } finally {\n    hideLoader();\n  }\n  const { totalHits, images } = result;\n  currentTotalHits = totalHits;\n\n  if (images.length === 0) {\n    iziToast.warning({\n      title: 'Warning',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n      timeout: 5000,\n    });\n    return;\n  }\n\n  renderImages(images);\n\n  if (currentTotalHits <= 15) {\n    iziToast.info({\n      title: 'Info',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      timeout: 5000,\n    });\n  } else {\n    showLoadMoreBtn();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  const nextPage = currentPage + 1;\n  showLoader();\n  let result;\n  try {\n    result = await fetchImages(currentQuery, nextPage);\n  } catch (error) {\n    // console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n      timeout: 5000,\n    });\n    return;\n  } finally {\n    hideLoader();\n  }\n  // Оновлювати поточну сторінку тільки в разі успішного запиту\n  currentPage = nextPage;\n  const { images } = result;\n\n  renderImages(images);\n  smoothScroll();\n\n  if (currentPage * 15 >= currentTotalHits) {\n    hideLoadMoreBtn();\n    iziToast.info({\n      title: 'Info',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      timeout: 5000,\n    });\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","response","axios","lightbox","SimpleLightbox","loader","gallery","showLoader","hideLoader","clearGallery","renderImages","images","markup","image","smoothScroll","galleryItem","itemHeight","form","input","loadMoreBtn","currentPage","currentQuery","currentTotalHits","showLoadMoreBtn","hideLoadMoreBtn","event","iziToast","result","totalHits","nextPage"],"mappings":"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"}